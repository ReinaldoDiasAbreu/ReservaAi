{% extends 'temp-view-reservas.html' %}

{% block title %}Reserva Aí{% endblock %}

{% load util %}

{% block form-filtro %}
    <div>
        <form method="GET" action="#" name="form_filter">
            {% csrf_token %}
          <div class="form-row align-items-center">
            <div class="form-row my-1">
              <label class="mr-sm-2" for="predio_busca">Escolha o prédio:</label>
              <select class="custom-select mr-sm-2" id="predio_busca" name="predio_busca" required>
                  {% for predio in predios %}
                      <option value="{{ predio.id }}"> {{ predio }}</option>
                  {% endfor %}
              </select>
            </div>
            <div class="form-row my-1">
                <label class="mr-sm-2" for="data_busca">Escolha a data:</label>
                <input class="form-control" id="data_busca" type="date" name="data_busca" min="{{data_atual}}" required>
            </div>
            <div class="form-row my-1" >
              <button type="submit" class="btn btn-primary">Filtrar</button>
            </div>
          </div>
        </form>
    </div>
    {% if mensagem %}
    <div class="alert alert-warning" role="alert">
        <p>{{ mensagem }}</p>
    </div>
    {% endif %}
{% endblock %}
{% block lista-reservas %}
    <h4>Prédio: <b>{{ predio_select }}</b>  - Data: <b> {{ data_busca }} </b> </h4>
    {% if not mensagem %}
    <div class="table-responsive-sm">
      <table class="table table-bordered table-sm">
      <thead>
        <tr >
          <th scope="col" class="col-1" style="text-align: center">Horário</th>
            {% for sala in salas %}
                <th scope="col" style="text-align: center">{{ sala.nome }}</th>
            {% endfor %}
        </tr>
      </thead>
        <tbody>

            {% for reserva in reservas_salas %}
                <tr>
                    {% for r in reserva %}
                        {% if r|type_date %}
                            <td class="col-1 table-success" style="text-align: center; font-weight: bolder ">
                                {{ r }}
                            </td>
                        {% else %}
                            {% if r|type_query %}
                                <td>
                                {% for ri in r %}
                                    <a href="" class="btn btn-success btn-block align-items-center" >
                                        <p>{{ ri.titulo }}</p>
                                    </a>
                                {% endfor %}
                                </td>
                            {% else %}
                                <td></td>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}

        </tbody>
      </table>
    </div>
    {% endif %}

{% endblock %}

